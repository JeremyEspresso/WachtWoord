@page "/"

<nav class="top-0 left-0">
    <div class="container flex flex-wrap justify-between items-center mx-auto">
        <div class="justify-between items-center flex w-auto order-1">
            <ul class="flex flex-row p-4 space-x-4">
                <li>
                    Create
                </li>
                <li>
                    Update
                </li>
                <li>
                    Delete
                </li>
            </ul>
        </div>
    </div>
</nav>

<table class="w-full text-sm text-left ">
    <thead class="text-xs uppercase text-black bg-gray-700 text-white">
        <tr>
            <th>Id</th>
            <th>Username</th>
            <th>Password</th>
        </tr>
    </thead>
    <tbody>
        @display_all_entries()
    </tbody>
</table>

@code {
    private List<Entry> entries = new List<Entry>();
    private Entry entry = new Entry();

    protected override void OnInitialized()
    {
        entries = GetEntries();
    }

    /*
    TO DO:
    - Call EntryService to get all entries
    */
    private List<Entry> GetEntries()
    {
        return new List<Entry>
        {
            new Entry { Id = 1, Password = "A", Username = "B"},
            new Entry { Id = 2, Password = "C", Username = "B"},
            new Entry { Id = 3, Password = "D", Username = "B"},
            new Entry { Id = 3, Password = "E", Username = "B"},
            new Entry { Id = 3, Password = "F", Username = "B"},
            new Entry { Id = 3, Password = "G", Username = "B"},
        };
    }

    /*
    This function gets called in the table body.
    It's purpose is displaying the entries as table rows.

    TO DO:
    - Make every table row selectable (onclick)
    - Make the user be able to toggle password chars.
    - When copied copy the real password. (Maybe a database call to get the real password so it's not stored anywhere)
    */
    private MarkupString display_all_entries()
    {
        var sb = new StringBuilder();
        var color = "";

        //Placeholder password chars.
        var password = "*******";

        int i = 0;
        foreach (var entry in entries)
        {
            //If statement is needed for striped rows. Every 2nd row gets a different color.
            if (i % 2 == 0)
            {
                color = "bg-gray-200";
            } else {
                color = "bg-gray-400";
            }

            sb.Append($"<tr class='border-b border-gray-700 {color}'><th class='py-4 px-6 font-medium whitespace-nowrap'>{entry.Id}</th><td>{entry.Username}</td><td>{password}</td></tr>");
            i++;
        }
        return new MarkupString(sb.ToString());
    }
}